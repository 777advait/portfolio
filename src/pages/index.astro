---
import Container from "~/components/common/container.astro";
import andrew from "~/assets/andrew.png";
import city from "~/assets/city.png";
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import tameImpala from "~/assets/tame-impala.png";
import perspective from "~/assets/perspective.png";

const images = [
  { src: city, alt: "city" },
  { src: perspective, alt: "perspective" },
  { src: tameImpala, alt: "tame-impala" },
  { src: andrew, alt: "andrew" },
];
---

<Layout
  content={{
    title: "astroxide",
    description:
      "multi-disciplinary engineer obsessed with breakshit scalability and performance",
  }}
>
  <main class="my-8 lg:mt-0">
    <Container>
      <div
        class="flex flex-col space-y-6 lg:flex-row lg:items-start lg:justify-between lg:space-y-0"
      >
        <div class="space-y-8 lg:pt-4 lg:pl-4 lg:max-w-[40%]">
          <div class="space-y-2 font-light">
            <h1 class="font-serif text-4xl italic md:text-6xl">
              advait <span class="text-xl md:text-4xl">(astroxide)</span>
            </h1>
            <p
              class="font-serif text-2xl leading-[120%] [word-spacing:0.15rem] md:text-3xl"
            >
              multi-disciplinary engineer, obsessed with
              <span class="italic line-through">breakshit</span> scalability and
              performance
            </p>
          </div>
          <div class="text-muted-foreground space-y-4 text-lg">
            <p>
              i love doing things that look good while doing it. im really
              obsessive about good design, typography and ux (in pretty much
              everything around me)
            </p>
            <p>
              over the past year i've worked across multiple startups (5+ ig) -
              freelancing, interning, sometimes part-time. currently im working
              on side-gigs for other ppl and iterating in stealth over at my
              <a
                href="https://celestialabs.vercel.app"
                class="bg-muted text-muted-foreground mr-0.5 px-1 font-medium"
                >little imaginary lab</a
              >.
            </p>
            <p>
              outside tech, i've always had an itch for creative stuff - music,
              design, random side projects. i've dropped AMVs, played around
              with graphics, and i'll probably keep hopping between mediums as
              long as it scratches that urge to make.
            </p>
            <p>
              i don't really measure myself by titles, roles or a fixed timeline
              bcs of my belief in the principles of <a
                href="#"
                class="bg-muted text-muted-foreground mr-0.5 px-1 font-medium"
                >vairagya</a
              >
            </p>
          </div>
        </div>

        <div id="masonry" class="mt-3 lg:pt-4 lg:pr-4">
          {
            images.map((img) => (
              <Image
                src={img.src}
                alt={img.alt}
                class="cursor-zoom-in grayscale"
                data-full={img.src.src}
              />
            ))
          }
        </div>
      </div>

      <!-- modal -->
      <div
        id="previewModal"
        class="fixed inset-0 z-50 hidden items-center justify-center bg-black/80"
      >
        <img
          id="previewImg"
          src=""
          alt="full preview"
          class="max-h-[90%] max-w-[90%] rounded-lg shadow-lg"
        />
      </div>
    </Container>
  </main>

  <!-- âœ… typesafe script -->
  <script>
    const modal = document.getElementById("previewModal") as HTMLDivElement;
    const previewImg = document.getElementById(
      "previewImg"
    ) as HTMLImageElement;

    document
      .querySelectorAll<HTMLImageElement>("#masonry img")
      .forEach((img) => {
        img.addEventListener("click", () => {
          const fullSrc = img.dataset.full;
          if (fullSrc) {
            previewImg.src = fullSrc;
            modal.classList.remove("hidden");
            modal.classList.add("flex");
          }
        });
      });

    modal.addEventListener("click", () => {
      modal.classList.add("hidden");
      modal.classList.remove("flex");
      previewImg.src = "";
    });
  </script>
</Layout>
